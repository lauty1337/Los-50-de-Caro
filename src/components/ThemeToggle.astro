---
import Moon from "./icons/Moon.astro";
import Sun from "./icons/Sun.astro";
---
<div class="hover:scale-110 transition active:scale-95 items-center">
    <button class="cursor-pointer p-2 items-center  hidden dark:inline-block dark:text-white" id="btnLight" aria-label="Cambiar a tema claro">
        <Sun class="size-6 md:size-8"/>
    </button>
    <button class="cursor-pointer p-2 inline-block dark:hidden" id="btnDark" aria-label="Cambiar a tema oscuro">
        <Moon class="size-6 md:size-8"/>
    </button>
</div>

<script is:inline>
(() => {
  const html = document.documentElement;            // <html>, no <body>
  const btnLight = document.getElementById('btnLight');
  const btnDark  = document.getElementById('btnDark');

  const setMode = (mode) => {
    const dark = mode === 'dark';
    html.classList.toggle('dark', dark);            // activa variantes `dark:`
    html.setAttribute('data-theme', dark ? 'dark' : 'light'); // opcional (daisyUI)
    localStorage.theme = dark ? 'dark' : 'light';   // recuerda la elección
  };

  // Estado inicial: localStorage → preferencia del SO → light
  const saved = localStorage.theme;
  const prefers = matchMedia('(prefers-color-scheme: dark)').matches;
  setMode(saved ?? (prefers ? 'dark' : 'light'));

  // Eventos
  btnDark.addEventListener('click',  () => setMode('dark'));  // mostrar luna, activar dark
  btnLight.addEventListener('click', () => setMode('light')); // mostrar sol, activar light
})();
</script>